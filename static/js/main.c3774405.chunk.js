(this["webpackJsonpmy-social-app"]=this["webpackJsonpmy-social-app"]||[]).push([[1],{139:function(e,t,n){e.exports=n(228)},222:function(e,t,n){},226:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n.n(a),c=n(0),u=n.n(c),i=n(10),o=n(17),s=n(66),l=n(60),d=n(81),p=n(25),f=n(84),m=n(80),g=n(2),h="".concat("APP_","INITIALIZED_SUCCESS"),b={initialized:!1};var v=Object(o.c)({messagesPage:s.b,profilePage:l.b,userPage:d.a,auth:p.b,form:m.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}}}),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,O=Object(o.e)(v,E(Object(o.a)(f.a)));n(222),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=n(18),_=n(39),j=n(40),w=n(43),S=n(42),P=n(41),N=(n(226),n(6)),I=n.n(N),A=n(55),C=n.n(A),k=function(e){var t=e.dialogs;return u.a.createElement("div",{className:C.a.sideBarWrapper},t.slice(0,3).map((function(e){return u.a.createElement("div",{key:e.id,className:C.a.sideBar},u.a.createElement("img",{src:e.avatar,alt:"avatar"}),u.a.createElement("div",null,e.name))})))},T=Object(y.b)((function(e){return{dialogs:e.messagesPage.dialogs}}))(k),x=function(e){return u.a.createElement("nav",{className:I.a.nav},u.a.createElement("ul",null,u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/profile",activeClassName:I.a.active},"Profile")),u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/dialogs",activeClassName:I.a.active},"Messages")),u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/users",activeClassName:I.a.active},"Users")),u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/news",activeClassName:I.a.active},"News")),u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/music",activeClassName:I.a.active},"Music")),u.a.createElement("li",{className:I.a.item},u.a.createElement(i.b,{to:"/settings",activeClassName:I.a.active},"Settings"))),u.a.createElement("div",{className:I.a.sideBar},u.a.createElement("span",null,"Friends"),u.a.createElement(T,null)))},F=n(21),U=n(90),R=n.n(U),L=n(45),B=n.n(L),M=function(e){return u.a.createElement("header",{className:B.a.header},u.a.createElement(i.b,{to:"/"},u.a.createElement("img",{src:R.a,alt:"logo"})),e.isFetching&&u.a.createElement(P.a,null),u.a.createElement("div",{className:B.a.loginBlock},e.isAuth?u.a.createElement("div",null,u.a.createElement("span",{className:B.a.enter},"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a:")," ".concat(e.login," "),u.a.createElement("button",{onClick:e.logoutThunk},"Logout")):u.a.createElement(i.b,{to:"/login"},"Login")))},z=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return u.a.createElement(M,this.props)}}]),n}(c.Component),D=Object(y.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth,isFetching:e.auth.isFetching}}),{logoutThunk:p.d})(z),G=function(){return u.a.createElement("div",{style:{display:"grid",height:"100%",justifyContent:"center",alignContent:"center"}},"\u043f\u0440\u0438\u0432\u0435\u0442\u0438\u043a\u0438, \u044d\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435")},W=function(e){return function(t){return u.a.createElement(c.Suspense,{fallback:u.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},u.a.createElement(e,t))}},H=u.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,310))})),q=u.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,309))})),Y=u.a.lazy((function(){return n.e(6).then(n.bind(null,311))})),Z=u.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,312))})),J=u.a.lazy((function(){return n.e(9).then(n.bind(null,306))})),X=u.a.lazy((function(){return n.e(8).then(n.bind(null,307))})),K=u.a.lazy((function(){return n.e(10).then(n.bind(null,308))})),Q=function(e){return u.a.createElement("div",{className:"App"},u.a.createElement(D,null),u.a.createElement(x,null),u.a.createElement("div",{className:"app-wrapper-content"},u.a.createElement(F.b,{exact:!0,path:"/",render:function(){return u.a.createElement(G,null)}}),u.a.createElement(F.b,{path:"/dialogs",render:W(H)}),u.a.createElement(F.b,{path:"/profile/:id?",render:W(q)}),u.a.createElement(F.b,{path:"/users",render:W(Y)}),u.a.createElement(F.b,{path:"/news",render:W(J)}),u.a.createElement(F.b,{path:"/music",render:W(X)}),u.a.createElement(F.b,{path:"/settings",render:W(K)}),u.a.createElement(F.b,{path:"/login",render:W(Z)})))},V=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.initializedAppThunk()}},{key:"render",value:function(){return this.props.initialized?u.a.createElement(Q,null):u.a.createElement(P.a,null)}}]),n}(u.a.Component),$=Object(o.d)(Object(y.b)((function(e){return{initialized:e.app.initialized}}),{initializedAppThunk:function(){return function(e){var t=e(Object(p.a)());Promise.all([t]).then((function(){e({type:h})}))}}}))(V);r.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(i.a,null,u.a.createElement(y.a,{store:O},u.a.createElement($,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h}));var a=n(5),r=n.n(a),c=n(11),u=n(2),i=n(8),o=n(47),s="".concat("AUTH_","SET_AUTH_USER_DATA"),l="".concat("AUTH_","FETCH_DATA"),d={id:null,email:null,login:null,isAuth:!1,isFetching:!1};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{isFetching:!1});case l:return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.payload.isFetching});default:return e}}var f=function(e,t,n,a){return{type:s,payload:{id:e,email:t,login:n,isAuth:a}}},m=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,u,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:l,payload:{isFetching:!0}}),e.next=3,i.a.authMe();case 3:return 0===(n=e.sent).resultCode&&(a=n.data,c=a.id,u=a.email,o=a.login,t(f(c,u,o,!0))),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e,t,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var u,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.loginMe(e,t,n,!0);case 2:0===(u=a.sent).resultCode?c(m()):(s=u.messages.length>0?u.messages[0]:"Some error",c(Object(o.a)("login",{_error:s})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},h=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.logoutMe();case 2:0===e.sent.resultCode&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},41:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(87),u=n.n(c),i=n(88),o=n.n(i);t.a=function(e){return r.a.createElement("div",{className:u.a.preLoader},r.a.createElement("img",{src:o.a,alt:"preloader"}))}},45:function(e,t,n){e.exports={header:"Header_header__1v0yI",loginBlock:"Header_loginBlock__3g_eP",enter:"Header_enter__2ni9x"}},55:function(e,t,n){e.exports={sideBarWrapper:"SideBar_sideBarWrapper__3qIql",sideBar:"SideBar_sideBar__3jBF7"}},6:function(e,t,n){e.exports={nav:"NavBar_nav__2RS83",item:"NavBar_item__WEh28",active:"NavBar_active__3Tb7-",sideBar:"NavBar_sideBar__FBsiD"}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return v}));var a=n(5),r=n.n(a),c=n(11),u=n(26),i=n(2),o=n(8),s="".concat("PROFILE_","ADD_POST_PROFILE"),l="".concat("PROFILE_","SET_USER_PROFILE"),d="".concat("PROFILE_","SET_USER_STATUS"),p="".concat("PROFILE_","DELETE_POST_PROFILE"),f={posts:[{id:1,message:"My post 1",likeCounts:"3"},{id:2,message:"My secondary post",likeCounts:"5"},{id:3,message:"My third post",likeCounts:"25"}],textArea:"",profile:null,status:"\u0412\u0430\u0448 \u0441\u0442\u0430\u0442\u0443\u0441"},m=function(e){return{type:s,payload:{post:e}}},g=function(e){return{type:d,payload:{status:e}}},h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getProfile(e);case 2:a=t.sent,n({type:l,payload:{profile:a}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getStatus(e);case 2:(a=t.sent)&&n(g(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0===o.b.updateStatus(e).resultCode&&n(g(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:e.posts.length+1,message:t.payload.post,likeCounts:0};return Object(i.a)(Object(i.a)({},e),{},{posts:[].concat(Object(u.a)(e.posts),[n])});case l:return Object(i.a)(Object(i.a)({},e),{},{profile:t.payload.profile});case d:return Object(i.a)(Object(i.a)({},e),{},{status:t.payload.status});case p:return Object(i.a)(Object(i.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.postId}))});default:return e}}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(26),r=n(2),c="".concat("MESSAGES_","ADD_MESSAGE_DIALOG"),u={messages:[{id:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442 \u043a\u0430\u043a \u0434\u0435\u043b\u0430"},{id:2,message:"\u0423 \u043c\u0435\u043d\u044f \u043d\u043e\u0440\u043c\u0438\u0447"},{id:3,message:"\u0410 \u0443 \u0442\u0435\u0431\u044f?"},{id:4,message:"\u0432\u0441\u0435 \u043f\u043e \u0444\u0435\u043d\u0448\u0443\u044e"}],dialogs:[{id:"1",name:"Andre",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTLCMHxa7MfSl3vH9hQDDgUwFpORGANIRLpP2t8Pax3IqljrYHZ&usqp=CAU"},{id:"2",name:"Dimka",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTtYsA5m3xp8EdW0R1vT5Oein32vpgXbFZ6NkB23lbuDxjZwedh&usqp=CAU"},{id:"3",name:"Nikolay",avatar:"https://i.ytimg.com/vi/WJMp9NtK4io/hqdefault.jpg"},{id:"4",name:"Arseniy",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcShIt3l2-355Sf6La3bZUy7lvRj6vDzjhWQfW1uNHWYxwRNcwzY&usqp=CAU"}]},i=function(e){return{type:c,payload:{message:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:e.messages.length+1,message:t.payload.message};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}}},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return i}));var a=n(82),r=n.n(a).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"3dec519a-9ed9-4d00-a8c6-4541a128800e"}}),c={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setFollow:function(e){return r.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(e)).then((function(e){return e.data}))},setUnfollow:function(e){return r.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(e)).then((function(e){return e.data}))}},u={authMe:function(){return r.get("auth/me").then((function(e){return e.data}))},loginMe:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logoutMe:function(){return r.delete("auth/login").then((function(e){return e.data}))}},i={getProfile:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.get("/profile/status/".concat(e||2)).then((function(e){return e.data}))},updateStatus:function(e){return r.put("/profile/status/",{status:e}).then((function(e){return e.data}))}}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"i",(function(){return S})),n.d(t,"b",(function(){return N})),n.d(t,"j",(function(){return I})),n.d(t,"h",(function(){return A})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return k})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return F}));var a=n(5),r=n.n(a),c=n(11),u=n(26),i=n(2),o=n(8),s=n(83),l=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),a):e}))},d="".concat("USERS_","FOLLOW"),p="".concat("USERS_","UNFOLLOW"),f="".concat("USERS_","SET_USERS"),m="".concat("USERS_","SET_CURRENT_PAGE"),g="".concat("USERS_","SET_TOTAL_COUNT"),h="".concat("USERS_","TOGGLE_IS_FETCHING"),b="".concat("USERS_","TOGGLE_IS_FOLLOWING_PROGRESS"),v={users:[],pageSize:6,totalItemsCount:0,currentPage:1,isFetching:!1,followingInProgress:[]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)(Object(i.a)({},e),{},{users:l(e.users,t.payload.userId,"id",{followed:!0})});case p:return Object(i.a)(Object(i.a)({},e),{},{users:l(e.users,t.payload.userId,"id",{followed:!1})});case f:return Object(i.a)(Object(i.a)({},e),{},{users:t.payload.users});case m:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.payload.currentPage});case g:return Object(i.a)(Object(i.a)({},e),{},{totalItemsCount:t.payload.totalCount});case h:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.payload.isFetching});case b:return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.payload.isProgress?[].concat(Object(u.a)(e.followingInProgress),[t.payload.userId]):[e.followingInProgress.filter((function(e){return e!==t.payload.userId}))]});default:return e}}var O=function(e){return{type:d,payload:{userId:e}}},y=function(e){return{type:p,payload:{userId:e}}},_=function(e){return{type:m,payload:{currentPage:e}}},j=function(e){return{type:h,payload:{isFetching:e}}},w=function(e,t){return{type:b,payload:{isProgress:e,userId:t}}},S=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(j(!0)),a(_(e)),n.next=4,o.c.getUsers(e,t);case 4:u=n.sent,a(j(!1)),a((i=u.items,{type:f,payload:{users:i}})),0===c().userPage.totalItemsCount&&a((r=u.totalCount,{type:g,payload:{totalCount:r}}));case 8:case"end":return n.stop()}var r,i}),n)})));return function(e,t){return n.apply(this,arguments)}}()},P=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(c(n)),t(w(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n,e,o.c.setUnfollow.bind(o.c),y);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n,e,o.c.setFollow.bind(o.c),O);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return e.userPage.users},C=(Object(s.a)((function(e){return e.userPage.users}),(function(e){e.filter((function(e){return e}))})),function(e){return e.userPage.pageSize}),k=function(e){return e.userPage.totalItemsCount},T=function(e){return e.userPage.currentPage},x=function(e){return e.userPage.isFetching},F=function(e){return e.userPage.followingInProgress}},87:function(e,t,n){e.exports={preLoader:"Preloader_preLoader__2CbYd"}},88:function(e,t,n){e.exports=n.p+"static/media/loader.bba5f526.svg"},90:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[139,2,3]]]);
//# sourceMappingURL=main.c3774405.chunk.js.map